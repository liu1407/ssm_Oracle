<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper 
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="User" >

	<resultMap type="User" id="BaseUserMap">
		<constructor>
			<idArg column="id" javaType="java.lang.String" jdbcType="OTHER"/>
			<arg column="username" javaType="java.lang.String" jdbcType="OTHER"/>
			<arg column="password" javaType="java.lang.String" jdbcType="OTHER"/>
			<arg column="email" javaType="java.lang.String" jdbcType="OTHER"/>
			<arg column="user_Type" javaType="java.lang.String" jdbcType="OTHER"/>
			<arg column="establish_Time" javaType="java.lang.String" jdbcType="OTHER"/>
		</constructor>
	</resultMap>


	<!-- 所有的增删查改都在这里定义sql语句 -->
	 <!-- 查询所有的用户信息 -->
	  <select id="findUsers" parameterType="User" resultType="User">
	  	SELECT id,username,password,email,user_type,establish_Time FROM krry_user_test
	  </select>
	  
	   <!-- 注册用户信息 -->
	   <insert id="saveUser" parameterType="User">
	   	INSERT INTO krry_user_test(
	   		id,
	  		username,
	  		password,
	  		email,
	  		user_type,
	  		establish_time
	  	)VALUES(
	  		#{id},
	  		#{username},
	  		#{password},
	  		#{email},
	  		#{userType},
	  		#{establishTime}
	  	)	
	   </insert>
	   
	   <!-- 注册用户信息 -->
	   <insert id="insert" parameterType="User">
	   	INSERT INTO krry_user_test(
	   		id,
	  		username,
	  		password,
	  		email,
	  		user_type,
	  		establish_time
	  	)VALUES(
	  		#{id},
	  		#{username},
	  		#{password},
	  		#{email},
	  		#{userType},
	  		#{establishTime}
	  	)	
	   </insert>
	   
	    <!-- 修改用户信息 -->
	   <update id="updateByPrimary" parameterType="User">
	   		update krry_user_test set username = #{username},password = #{password},email = #{email},user_type=#{userType},establish_time = #{establishTime}
	   		where id = #{id}
	   </update>
	   
	    <!-- 删除用户信息 -->
	   <delete id="deleteByPrimary" parameterType="User">
	   		delete from krry_user_test where id = #{id}
	   </delete>
	   
	    <!-- 根据主键查询 -->
	   <select id="selectByPrimary" parameterType="User" resultType="User" >
	   	SELECT
	  		id,
	  		username,
	  		password,
	  		email,
	  		user_type,
	  		establish_time	
	  	from
	  		krry_user_test
	  	where
	  		 id = #{id}
	   </select>
	   
	    <!-- 根据昵称查询 -->
	   <select id="selectUserByUsername" parameterType="User"  resultMap="BaseUserMap">
	   	SELECT
	  		id,
	  		username,
	  		password,
	  		email,
	  		user_type,
	  		establish_time	
	  	from
	  		krry_user_test
	  	where
	  		 username = #{username}
	   </select>
	   
	    <!-- 注册时根据输入的账号查找用户 -->
	   <select id="selectUserByEmail" parameterType="User"  resultMap="BaseUserMap" >
	   	SELECT
	  		id,
	  		username,
	  		password,
	  		email,
	  		user_type,
	  		establish_time	
	  	from
	  		krry_user_test
	  	where
	  		 email = #{email}
	   </select>
</mapper>